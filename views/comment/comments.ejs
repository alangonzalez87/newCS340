<h2>Comments</h2>
<form method="post" action="/comment/comments">
    <textarea name="commentText" required></textarea>
    <input type="hidden" name="parentCommentId" value="">
    <button type="submit">Add Comment</button>
</form>

<% comments.forEach(comment => { %>
    <div>
        <p><%= comment.comment_text %></p>
        <p>Posted by user ID: <%= comment.comment_author %> at <%= comment.created_at %></p>

        <form method="post" action="/comment/comments">
            <textarea name="commentText" required></textarea>
            <input type="hidden" name="parentCommentId" value="<%= comment.comment_id %>">
            <button type="submit">Reply</button>
        </form>

        <% if (comment.responses && comment.responses.length > 0) { %>
            <div style="margin-left: 20px;">
                <% comment.responses.forEach(response => { %>
                    <div>
                        <p><%= response.comment_text %></p>
                        <p>Posted by user ID: <%= response.comment_author %> at <%= response.created_at %></p>
                    </div>
                <% }) %>
            </div>
        <% } %>
    </div>
<% }) %>

